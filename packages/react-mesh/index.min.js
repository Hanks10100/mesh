/**
 * react-mesh v0.3.0
 * Author: Hanks <zhanghan.me@gmail.com>
 * Build: 2017-03-22 15:29
 */

!function(r,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):r.ReactMeshComponent=e(r.React)}(this,function(r){"use strict";function e(r,e){return r[0]===e[0]&&r[1]===e[1]}function t(r,e){return[[r[0],r[1]],[r[0]+e[0],r[1]],[r[0],r[1]+e[1]],[r[0]+e[0],r[1]+e[1]]]}function n(r,t){return r.filter(function(r){return t.every(function(t){return!e(r,t)})})}function u(r,e){return n(r,e).concat(n(e,r))}function o(r){for(var e=Number.MAX_VALUE,t=Number.MAX_VALUE,n=0;n<r.length;++n){var u=r[n];u[1]<t?(e=u[0],t=u[1]):u[1]===t&&(e=u[0]<e?u[0]:e)}return[e,t]}function i(r,e){for(var n=[0,0],i=[n,[Number(r),0]],a=[[0,0]],s=0;s<e.length;++s)i=u(i,t(n,e[s])),a[s+1]=n=o(i);return a}function a(r){return r?"object"==typeof WXEnvironment&&"Web"!==WXEnvironment.platform?Number(r):r+"px":0}function s(r){return"string"==typeof r?r.split(/\s*\|\s*/).map(function(r){return r.split(/\s*\,\s*/).map(Number)}):Array.isArray(r)?r:[]}function p(r,e){var t=r.data.attrs;return t&&t[e]?t[e]:null}function f(r,e,t){if(void 0===t&&(t=p),Array.isArray(e)){var n=Array.isArray(r.orders)?r.orders:[];return"string"==typeof r.orders&&(n=r.orders.split(/\s*\,\s*/).map(Number)),e.reduce(function(r,e,u){var o=t(e,"mesh-order")||t(e,"meshOrder"),i=Number(o)||r+1;return!o&&n[u]||n.splice(u,1,i),i},0),n}}function c(r,e){var t=Number(r.width)||750,n=Number(r.column)||12,u=s(r.layout||[]),o=e||u.map(function(r,e){return e+1}),p=Number(r.gap)||0,f=(t+p)/n,c=i(n,u);return{wrapperStyle:{position:"relative",width:a(t),height:a(c.pop()[1]*f-p)},layoutStyle:o.map(function(r){return{position:"absolute",top:a(c[r-1][1]*f),left:a(c[r-1][0]*f),width:a(u[r-1][0]*f-p),height:a(u[r-1][1]*f-p)}})}}function l(r,e){var t=r.props;return t&&t[e]?t[e]:null}function d(e){var t=f(e,e.children,l),n=c(e,t),u=n.wrapperStyle,o=n.layoutStyle;return r.createElement("div",{style:Object.assign({},e.style,u)},r.Children.map(e.children,function(e,t){var n={style:Object.assign({},e.props.style,o[t])};return e.type===d&&(n.width=parseFloat(o[t].width)),r.cloneElement(e,n)}))}r="default"in r?r.default:r;var y=r.PropTypes,m=y.arrayOf,h=y.number,b=y.oneOfType,v=y.string;return d.propTypes={width:b([h,v]),column:b([h,v]),gap:b([h,v]),orders:b([m(h),v]),layout:b([m(m(h)),v]).isRequired},d.defaultProps={layout:[]},d});