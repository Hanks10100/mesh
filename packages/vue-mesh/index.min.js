/**
 * vue-mesh v0.4.0
 * Author: Hanks <zhanghan.me@gmail.com>
 * Build: 2017-07-21 00:30
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.VueMeshComponent=r()}(this,function(){"use strict";function t(t,r){return t[0]===r[0]&&t[1]===r[1]}function r(t,r){return[[t[0],t[1]],[t[0]+r[0],t[1]],[t[0],t[1]+r[1]],[t[0]+r[0],t[1]+r[1]]]}function e(r,e){return r.filter(function(r){return e.every(function(e){return!t(r,e)})})}function n(t,r){return e(t,r).concat(e(r,t))}function o(t){for(var r=Number.MAX_VALUE,e=Number.MAX_VALUE,n=0;n<t.length;++n){var o=t[n];o[1]<e?(r=o[0],e=o[1]):o[1]===e&&(r=o[0]<r?o[0]:r)}return[r,e]}function i(t,e){for(var i=[0,0],u=[i,[Number(t),0]],s=[[0,0]],f=0;f<e.length;++f)u=n(u,r(i,e[f])),s[f+1]=i=o(u);return s}function u(t){return t?"object"==typeof WXEnvironment&&"Web"!==WXEnvironment.platform?Number(t):t+"px":0}function s(t){return t.split(/\s*\,\s*/).map(Number)}function f(t){return"string"==typeof t?t.split(/\s*\|\s*/).map(s):Array.isArray(t)?t:[]}function a(t,r){var e=t.data.attrs;return e&&e[r]?e[r]:null}function p(t,r,e){if(void 0===e&&(e=a),Array.isArray(r)){var n=Array.isArray(t.orders)?t.orders:[],o=Array.isArray(t.offsets)?t.offsets:[];return"string"==typeof t.orders&&(n=s(t.orders)),"string"==typeof t.offsets&&(o=f(t.offsets)),r.reduce(function(t,r,i){var u=e(r,"mesh-order")||e(r,"meshOrder"),f=e(r,"mesh-offset")||e(r,"meshOffset"),a=Number(u)||t+1;return!u&&n[i]||n.splice(i,1,a),!f&&o[i]||o.splice(i,1,s(f||"0,0")),a},0),{orders:n,offsets:o}}}function c(t,r){void 0===r&&(r={});var e=Number(t.width)||750,n=Number(t.column)||12,o=f(t.layout||[]),s=r.orders||o.map(function(t,r){return r+1}),a=r.offsets||o.map(function(t){return[0,0]}),p=Number(t.gap)||0,c=(e+p)/n,l=i(n,o);return{wrapperStyle:{position:"relative",width:u(e),height:u(l.pop()[1]*c-p)},layoutStyle:s.map(function(t){return{position:"absolute",top:u((l[t-1][1]+a[t-1][1])*c),left:u((l[t-1][0]+a[t-1][0])*c),width:u(o[t-1][0]*c-p),height:u(o[t-1][1]*c-p)}})}}function l(t){return Array.isArray(t)?t.filter(function(t){return!!t.tag}):[]}function d(t){t.component("mesh",{props:{width:[Number,String],column:[Number,String],gap:[Number,String],orders:[Array,String],offsets:[Array,String],layout:{type:[Array,String],required:!0,default:[]}},render:function(r){var e=l(this.$slots.default),n=c(this,p(this,e)),o=n.wrapperStyle,i=n.layoutStyle;return r("div",{staticStyle:o},e.map(function(r,e){r.data.staticStyle=t.util.extend(r.data.staticStyle||{},i[e]);var n=r.componentOptions;return n&&"mesh"===n.tag&&(n.propsData||(n.propsData={}),n.propsData.width=parseFloat(i[e].width)),r}))}})}return"function"==typeof Vue&&d(Vue),{install:d}});