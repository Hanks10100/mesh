/**
 * vue-mesh v0.2.0
 * Author: Hanks <zhanghan.me@gmail.com>
 * Build: 2017-03-21 20:01
 */

!function(t,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):t.VueMeshComponent=r()}(this,function(){"use strict";function t(t,r){return t[0]===r[0]&&t[1]===r[1]}function r(t,r){return[[t[0],t[1]],[t[0]+r[0],t[1]],[t[0],t[1]+r[1]],[t[0]+r[0],t[1]+r[1]]]}function e(r,e){return r.filter(function(r){return e.every(function(e){return!t(r,e)})})}function n(t,r){return e(t,r).concat(e(r,t))}function u(t){for(var r=Number.MAX_VALUE,e=Number.MAX_VALUE,n=0;n<t.length;++n){var u=t[n];u[1]<e?(r=u[0],e=u[1]):u[1]===e&&(r=u[0]<r?u[0]:r)}return[r,e]}function o(t,e){for(var o=[0,0],i=[o,[Number(t),0]],a=[[0,0]],s=0;s<e.length;++s)i=n(i,r(o,e[s])),a[s+1]=o=u(i);return a}function i(t){return t?"object"==typeof WXEnvironment&&"Web"!==WXEnvironment.platform?Number(t):t+"px":0}function a(t){return"string"==typeof t?t.split(/\s*\|\s*/).map(function(t){return t.split(/\s*\,\s*/).map(Number)}):Array.isArray(t)?t:[]}function s(t,r){var e=Number(t.width)||750,n=Number(t.column)||12,u=a(t.layout||[]),s=r||u.map(function(t,r){return r+1}),f=Number(t.gap)||0,p=(e+f)/n,c=o(n,u);return{wrapperStyle:{position:"relative",width:i(e),height:i(c.pop()[1]*p-f)},layoutStyle:s.map(function(t){return{position:"absolute",top:i(c[t-1][1]*p),left:i(c[t-1][0]*p),width:i(u[t-1][0]*p-f),height:i(u[t-1][1]*p-f)}})}}function f(t){return Array.isArray(t)?t.filter(function(t){return!!t.tag}):[]}function p(t,r){var e=t.data.attrs;return e&&e[r]?e[r]:null}function c(t,r){if(Array.isArray(r)){var e=Array.isArray(t.orders)?t.orders:[];return"string"==typeof t.orders&&(e=t.orders.split(/\s*\,\s*/).map(Number)),r.reduce(function(t,r,n){var u=p(r,"mesh-order")||p(r,"meshOrder"),o=Number(u)||t+1;return!u&&e[n]||e.splice(n,1,o),o},0),e}}function l(t){t.component("mesh",{props:{width:[Number,String],column:[Number,String],gap:[Number,String],orders:[Array,String],layout:{type:[Array,String],required:!0,default:[]}},render:function(r){var e=f(this.$slots.default),n=s(this,c(this,e)),u=n.wrapperStyle,o=n.layoutStyle;return r("div",{staticStyle:u},e.map(function(r,e){r.data.staticStyle=t.util.extend(r.data.staticStyle||{},o[e]);var n=r.componentOptions;return n&&"mesh"===n.tag&&(n.propsData||(n.propsData={}),n.propsData.width=parseFloat(o[e].width)),r}))}})}return"function"==typeof Vue&&l(Vue),{install:l}});